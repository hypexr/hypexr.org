<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>readgraph.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>readgraph.cpp</h1><a href="readgraph_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Scott Rippee</span>
00002 <span class="comment">//readgraph class function implementation</span>
00003 
00004 <span class="preprocessor">#include "d_util.h"</span>
00005 <span class="preprocessor">#include "<a class="code" href="readgraph_8h.html">readgraph.h</a>"</span>
00006 <span class="preprocessor">#include &lt;string&gt;</span>
00007 
00008 <span class="comment">//parseGraph</span>
<a name="l00009"></a><a class="code" href="classReadGraph.html#ReadGrapha2">00009</a> <span class="comment">//move through graphs extracting edges</span>
00010 <span class="keywordtype">void</span> <a class="code" href="classReadGraph.html#ReadGrapha2">ReadGraph::parseGraph</a>()
00011 {
00012         <span class="keywordtype">char</span> line[100];
00013         <span class="keywordtype">char</span> c;
00014         string line_str, firstNum, secNum, problem;
00015         <span class="keywordtype">bool</span> found_problem = <span class="keyword">false</span>;
00016 
00017         <a class="code" href="classReadGraph.html#ReadGrapho0">g</a>.clear();
00018         <a class="code" href="classReadGraph.html#ReadGrapho1">vectSet</a>.clear();
00019         
00020         <span class="keywordflow">while</span>( <a class="code" href="classReadGraph.html#ReadGrapho2">fin</a>.get(c) )
00021         {
00022                 <a class="code" href="classReadGraph.html#ReadGrapho2">fin</a>.getline( line, 100 );
00023                 line_str = line;
00024                 
00025                 <span class="keywordflow">if</span>( c == <span class="charliteral">'p'</span> )  <span class="comment">//make sure that problem line exists and check for "edge"</span>
00026                 {
00027                         line_str.erase( 0, 1 );
00028                         string::size_type loc = line_str.find( <span class="stringliteral">" "</span>, 0 );
00029                         problem = line_str.substr( 0, loc );
00030                         <span class="keywordflow">if</span>( problem == <span class="stringliteral">"edge"</span> )
00031                                 found_problem = <span class="keyword">true</span>;
00032                 }
00033                         
00034                 <span class="keywordflow">if</span>( c == <span class="charliteral">'e'</span> )
00035                 {
00036                         <span class="keywordflow">if</span>( found_problem )
00037                         {
00038                                 line_str.erase( 0, 1 );
00039                                 string::size_type loc = line_str.find( <span class="stringliteral">" "</span>, 0 );
00040 
00041                                 firstNum =  line_str.substr( 0, loc );
00042                                 line_str.erase( 0, loc+1 );
00043                                 secNum =  line_str.substr( 0, line_str.length() );
00044 
00045                                 <span class="comment">//verticies not allowed to loop to self because of insertEdge</span>
00046                                 <span class="keywordflow">if</span>( firstNum != secNum )
00047                                 {
00048                                         <a class="code" href="classReadGraph.html#ReadGrapho0">g</a>.insertVertex( firstNum );     <span class="comment">//insert vertex's into graph</span>
00049                                         <a class="code" href="classReadGraph.html#ReadGrapho0">g</a>.insertVertex( secNum );
00050                                         <a class="code" href="classReadGraph.html#ReadGrapho0">g</a>.insertEdge( firstNum, secNum, 0 );    <span class="comment">//connect them</span>
00051                                 } <span class="keywordflow">else</span> {
00052                                         cout&lt;&lt; <span class="stringliteral">"Graph verticies are not allowed to loop to them selves: "</span>&lt;&lt; firstNum&lt;&lt; <span class="stringliteral">" "</span>&lt;&lt; secNum&lt;&lt;  endl;
00053                                 }
00054                         } <span class="keywordflow">else</span> 
00055                                 cout&lt;&lt; <span class="stringliteral">"Found an edge in graph input file before a problem"</span>&lt;&lt; endl;
00056                 }
00057         }
00058 
00059         strongComponents( <a class="code" href="classReadGraph.html#ReadGrapho0">g</a>, <a class="code" href="classReadGraph.html#ReadGrapho1">vectSet</a> ); <span class="comment">//find strong components</span>
00060 
00061         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classReadGraph.html#ReadGrapho1">vectSet</a>.size(); i++ )
00062         {
00063                 cout&lt;&lt; <span class="stringliteral">"Strong Component "</span>&lt;&lt; i+1&lt;&lt; <span class="stringliteral">":  "</span>;
00064                 writeContainer( <a class="code" href="classReadGraph.html#ReadGrapho1">vectSet</a>[i].begin(), <a class="code" href="classReadGraph.html#ReadGrapho1">vectSet</a>[i].end(), <span class="stringliteral">" "</span> );
00065                 cout&lt;&lt; endl;
00066         }
00067 
00068         <a class="code" href="classReadGraph.html#ReadGrapho2">fin</a>.close();
00069 }
00070 
00071 <span class="comment">//openGraph</span>
<a name="l00072"></a><a class="code" href="classReadGraph.html#ReadGrapha1">00072</a> <span class="comment">//Attempts to open file name passed and returns results</span>
00073 <span class="keywordtype">bool</span> <a class="code" href="classReadGraph.html#ReadGrapha1">ReadGraph::openGraph</a>( string fileName )
00074 {
00075         <span class="keywordtype">bool</span> success=<span class="keyword">false</span>;
00076         <a class="code" href="classReadGraph.html#ReadGrapho2">fin</a>.clear();    <span class="comment">//clear any flags that were previously set</span>
00077 
00078         <a class="code" href="classReadGraph.html#ReadGrapho2">fin</a>.open( fileName.c_str(), ios::in );
00079 
00080         <span class="keywordflow">if</span>( !<a class="code" href="classReadGraph.html#ReadGrapho2">fin</a> )
00081         {
00082                 success = <span class="keyword">false</span>;
00083                 cout&lt;&lt; endl&lt;&lt; <span class="stringliteral">"Error opening file: "</span>&lt;&lt; fileName&lt;&lt; endl;
00084         } <span class="keywordflow">else</span>
00085                 success = <span class="keyword">true</span>;
00086 
00087         <span class="keywordflow">return</span> success;
00088 }
00089 
<a name="l00090"></a><a class="code" href="classReadGraph.html#ReadGrapha0">00090</a> <span class="comment">//This help message gets printed if no arguments are given after command</span>
00091 <span class="keywordtype">void</span> <a class="code" href="classReadGraph.html#ReadGrapha0">ReadGraph::printHelp</a>()
00092 {
00093         cout&lt;&lt;endl&lt;&lt; <span class="stringliteral">"strong reports the strong components found in DIMACS benchmark graphs."</span>&lt;&lt; endl&lt;&lt; endl;
00094         cout&lt;&lt; <span class="stringliteral">"Usage: strong &lt;graph1&gt; &lt;graph2&gt; ... &lt;graphn&gt;"</span>&lt;&lt; endl&lt;&lt;endl;
00095         cout&lt;&lt; <span class="stringliteral">"Example:"</span>&lt;&lt;endl;
00096         cout&lt;&lt; <span class="stringliteral">"   strong firstgraph.col secondgraph.col thirdgraph.col"</span>&lt;&lt; endl&lt;&lt; endl;
00097         cout&lt;&lt; <span class="stringliteral">"Online documentation can be found at:"</span>&lt;&lt; endl;
00098         cout&lt;&lt; <span class="stringliteral">"   http://www.ecst.csuchico.edu/~srippee"</span>&lt;&lt; endl&lt;&lt;endl;
00099 }
00100 
</pre></div><hr><address style="align: right;"><small>Generated on Tue May 6 03:57:17 2003 for strong by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc1 </small></address>
</body>
</html>
